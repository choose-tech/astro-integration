---
import type { Category } from "../utils/get-categories";
import { SearchQuery } from "../utils/search-query";

export interface Props {
  category: Category;
}

const { category } = Astro.props;

const searchQuery = SearchQuery.fromSearchParams(Astro.url.searchParams);
const isActive = searchQuery.categories.includes(category.id);
searchQuery.toggle("categories", category.id);
---

<a
  href={searchQuery.encodedQuery({ format: "url" })}
  class:list={[
    "mb-2 mr-2 flex select-none items-center px-2 py-1 text-sm font-medium text-gray-950 transition-opacity",
    `bg-${category.color}-400`,
    isActive ? "opacity-50 hover:opacity-75" : "hover:opacity-75",
  ]}
>
  <iconify-icon icon={category.icon} class="mr-1 h-4 w-4"></iconify-icon>
  <span>{category.name}</span>
</a>
